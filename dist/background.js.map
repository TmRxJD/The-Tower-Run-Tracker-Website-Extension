{
  "version": 3,
  "sources": ["../background.js"],
  "sourcesContent": ["const env = {\n  VITE_APPWRITE_ENDPOINT: 'https://appwrite.the-tower-run-tracker.com/v1',\n  VITE_APPWRITE_PROJECT_ID: '68190de700097b8f59df',\n}\n\n// background.js (source, not bundled output)\nconsole.log('[background.js] Starting service worker...');\n\nconsole.log('[background.js] Service worker loaded');\n\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message && message.type === 'LOGIN_WITH_DISCORD') {\n    console.log('[background.js] LOGIN_WITH_DISCORD received');\n    // Force the correct extension-based redirect URI\n    // This will always be chrome-extension://<extension-id>/oauth2\n    const extensionId = chrome.runtime.id;\n    const redirectUri = `chrome-extension://${extensionId}/oauth2`;\n    console.log('[background.js] Using redirectUri:', redirectUri);\n    const authUrl = `${env.VITE_APPWRITE_ENDPOINT.replace(/\\/$/, '')}/account/sessions/oauth2/discord?project=${env.VITE_APPWRITE_PROJECT_ID}&success=${encodeURIComponent(redirectUri)}&failure=${encodeURIComponent(redirectUri)}`;\n    console.log('[background.js] Launching WebAuthFlow:', authUrl);\n    chrome.identity.launchWebAuthFlow({\n      url: authUrl,\n      interactive: true\n    }, () => {\n      sendResponse({ success: true});\n    });\n    return true; // Keep the message channel open for async response\n  }\n  if (message && message.type === 'GET_SESSION_USER') {\n    account.get().then(user => {\n      sendResponse({ success: true, user });\n    }).catch(err => {\n      sendResponse({ success: false, error: err.message || String(err) });\n    });\n    return true;\n  }\n});"],
  "mappings": ";AAAA,IAAM,MAAM;AAAA,EACV,wBAAwB;AAAA,EACxB,0BAA0B;AAC5B;AAGA,QAAQ,IAAI,4CAA4C;AAExD,QAAQ,IAAI,uCAAuC;AAEnD,OAAO,QAAQ,UAAU,YAAY,CAAC,SAAS,QAAQ,iBAAiB;AACtE,MAAI,WAAW,QAAQ,SAAS,sBAAsB;AACpD,YAAQ,IAAI,6CAA6C;AAGzD,UAAM,cAAc,OAAO,QAAQ;AACnC,UAAM,cAAc,sBAAsB,WAAW;AACrD,YAAQ,IAAI,sCAAsC,WAAW;AAC7D,UAAM,UAAU,GAAG,IAAI,uBAAuB,QAAQ,OAAO,EAAE,CAAC,4CAA4C,IAAI,wBAAwB,YAAY,mBAAmB,WAAW,CAAC,YAAY,mBAAmB,WAAW,CAAC;AAC9N,YAAQ,IAAI,0CAA0C,OAAO;AAC7D,WAAO,SAAS,kBAAkB;AAAA,MAChC,KAAK;AAAA,MACL,aAAa;AAAA,IACf,GAAG,MAAM;AACP,mBAAa,EAAE,SAAS,KAAI,CAAC;AAAA,IAC/B,CAAC;AACD,WAAO;AAAA,EACT;AACA,MAAI,WAAW,QAAQ,SAAS,oBAAoB;AAClD,YAAQ,IAAI,EAAE,KAAK,UAAQ;AACzB,mBAAa,EAAE,SAAS,MAAM,KAAK,CAAC;AAAA,IACtC,CAAC,EAAE,MAAM,SAAO;AACd,mBAAa,EAAE,SAAS,OAAO,OAAO,IAAI,WAAW,OAAO,GAAG,EAAE,CAAC;AAAA,IACpE,CAAC;AACD,WAAO;AAAA,EACT;AACF,CAAC;",
  "names": []
}
